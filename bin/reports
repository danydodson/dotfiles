#!/bin/bash

# =================== // ANSI Colors, Reset & Message //
#
# Description:
#   Custom modules that change colors and add messages to shell scripts
#
# USAGE:
#   - At the top of any script:
#     source ~/.dotfiles/bin/reports
#
#   - Then, use a function folowed by a message:
#     glow "This text glows"
#
# -----------------------------------------------------------------------------

E='\033'
RESET="${E}[0m"
BOLD="${E}[1m"

NO_COLOR="${E}[0m"
BLUE="${E}[0;34m"
RED="${E}[0;91m"
GREEN="${E}[0;32m"
CYAN="${E}[0;96m"
YELLOW="${E}[0;93m"
MAGENTA="${E}[0;35m"

NC="\e[0m"
info_symbol="âž¡ï¸"
good_symbol="âœ”ï¸"
error_symbol="ð—«"
bomb_symbol="ðŸ’¥"

glow() {
  local msg="$1"
  printf "[$(date +%F)]: ${CYAN}${info_symbol} ${msg}${NC}\n"
}

bug() {
  local msg="$1"
  printf "[$(date +%F)]: ${RED}${error_symbol} ${msg}${NC}\n"
}

blue() {
  echo -e "${BLUE}${*}${RESET}"
}

red() {
  echo -e "${RED}${*}${RESET}"
}

green() {
  echo -e "${GREEN}${*}${RESET}"
}

cyan() {
  echo -e "${CYAN}${*}${RESET}"
}

yellow() {
  echo -e "${YELLOW}${*}${RESET}"
}

magenta() {
  echo -e "${MAGENTA}${*}${RESET}"
}

no_color() {
  echo -e "${NO_COLOR}${*}${RESET}"
}

exists() {
  command -v "$1" >/dev/null 2>&1
}

info() {
  echo -e "${CYAN}${*}${RESET}"
}

error() {
  echo -e "${RED}Error: ${*}${RESET}" >&2
  # exit 1
}

success() {
  echo -e "${GREEN}${*}${RESET}"
}

finish() {
  success "Done!"
  echo
  sleep 1
}

command() {
  local input="$*"
  local before_colon="${input%%:*}"
  local after_colon="${input#*:}"

  if [[ "$input" == *:* ]]; then
    echo -e "${BLUE}${before_colon}${RESET}:${YELLOW}${after_colon}${RESET}"
  else
    echo -e "${BLUE}${input}${RESET}"
  fi
}

descs() {
  local input="$*"
  local before_colon="${input%%â€¢*}"
  local after_colon="${input#*â€¢}"

  if [[ "$input" == *â€¢* ]]; then
    echo -e "${BLUE}${before_colon}${RESET}â€¢${YELLOW}${after_colon}${RESET}"
  else
    echo -e "${BLUE}${input}${RESET}"
  fi
}

usage() {
  local input="$*"
  local before_colon="${input%%:*}"
  local after_colon="${input#*:}"
  echo -e "${GREEN}${before_colon}:${RESET}${after_colon}"
}

commands() {
  local input="$*"
  local before_dash="${input%%--*}"
  local after_dash="${input#*--}"

  echo -e "${BLUE}${before_dash}${RESET}${after_dash}"
}

frame_banner() {
  local msg=" $* "
  local width=${#msg}
  printf "\n%s\n" "$(printf '%*s' "$width" '' | tr ' ' '=')"
  echo "$msg"
  printf "%s\n\n" "$(printf '%*s' "$width" '' | tr ' ' '=')"
}

on_start() {
  info "                                               "
  info "           __        __   ____ _  __           "
  info "      ____/ /____   / /_ / __/(_)/ /___   _____"
  info "     / __  // __ \ / __// /_ / // // _ \ / ___/"
  info "  _ / /_/ // /_/ // /_ / __// // //  __/(__  ) "
  info " (_)\__,_/ \____/ \__//_/  /_//_/ \___//____/  "
  info "                                               "
  info "                                               "
  read -rp "Do you want to proceed with installation? [y/N] " -n 1 answer
  echo
  if [ "${answer}" != "y" ]; then
    exit
  fi
}

on_finish() {
  success "Everything was successfully done!"
  success "Happy Coding!"
  echo
  echo -ne "$RED"'-_-_-_-_-_-_-_-_-_-_-_-_-_-_'
  echo -e "$RESET""$BOLD"',------,'"$RESET"
  echo -ne "$YELLOW"'-_-_-_-_-_-_-_-_-_-_-_-_-_-_'
  echo -e "$RESET""$BOLD"'|   /\_/'\'"$RESET"
  echo -ne "$GREEN"'-_-_-_-_-_-_-_-_-_-_-_-_-_-'
  echo -e "$RESET""$BOLD"'~|__( ^ .^)'"$RESET"
  echo -ne "$CYAN"'-_-_-_-_-_-_-_-_-_-_-_-_-_-_'
  echo -e "$RESET""$BOLD"'""  ""'"$RESET"
  echo
  info "P.S: Don't forget to restart a terminal :)"
  echo
}

on_error() {
  echo
  error "Wow... Something serious happened!"
  error "Though, I don't know what really happened :("
  echo
  exit 1
}
